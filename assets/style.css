/* =========================
   Rodzaki — style.css
   (Publications portal architecture: corrected stack + anchored plinths)
   ========================= */

/* reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; }

/* ====== theme tokens ====== */
:root{
  --ink: #2a2a2a;
  --muted: #6b6b6b;
  --paper: #f2efe6;

  /* geometry */
  --corniceH: 96px;
  --stepH: 160px;

  --colW: 86px;
  --colGap: 26px;

  --capH: 28px;

  --upperPlinthW: 120px;      /* per column */
  --upperPlinthH: 22px;

  --lowerPlinthW: 260px;      /* per pair */
  --lowerPlinthH: 34px;

  --roundBig: 22px;
  --roundMed: 16px;

  /* placement (tune this to move BOTH left+right pairs outward/inward) */
  --pairEdgeInset: 72px;      /* distance from window edge to OUTER column */
}

/* ====== base typography ====== */
body{
  font: 16px/1.6 system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  color: var(--ink);
  background: var(--paper);
}

h1{
  margin: 0 0 12px;
  font-size: 30px;
  letter-spacing: .4px;
}

p{ margin: 10px 0; color: var(--muted); }
a{ color: #0b4f6c; text-decoration: none; }
a:hover{ text-decoration: underline; }

/* layout */
main{
  max-width: 980px;
  margin: 0 auto;
  padding: 32px 20px;
}
header{ text-align: center; }

/* =========================
   PUBLICATIONS — PORTAL
   ========================= */

body.publications-directory{
  background: var(--paper);
}

/* All heavy painting lives here (single composited layer) */
body.publications-directory::before{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  /* ===== derived anchors ===== */

  /* horizontal anchors */
  --pairSpanW: calc((var(--colW) * 2) + var(--colGap));

  --leftOuterX: var(--pairEdgeInset);
  --leftInnerX: calc(var(--leftOuterX) + var(--colW) + var(--colGap));

  --rightOuterX: calc(100vw - var(--pairEdgeInset) - var(--colW));
  --rightInnerX: calc(var(--rightOuterX) - var(--colW) - var(--colGap));

  --leftPairCenterX: calc(var(--leftOuterX) + (var(--pairSpanW) / 2));
  --rightPairCenterX: calc(var(--rightInnerX) + (var(--pairSpanW) / 2));

  --leftLowerPlinthX: calc(var(--leftPairCenterX) - (var(--lowerPlinthW) / 2));
  --rightLowerPlinthX: calc(var(--rightPairCenterX) - (var(--lowerPlinthW) / 2));

  /* vertical stack (CORRECT ORDER):
     cornice → cap → shaft → upper plinth → lower plinth → steps */
  --corniceTop: 0px;
  --capTop: var(--corniceH);                                  /* cap touches cornice (below it) */
  --shaftTop: calc(var(--capTop) + var(--capH));              /* shaft touches cap */

  --stepTop: calc(100% - var(--stepH));                       /* top of steps band */
  --lowerPlinthTop: calc(var(--stepTop) - var(--lowerPlinthH));/* lower plinth touches steps */
  --upperPlinthTop: calc(var(--lowerPlinthTop) - var(--upperPlinthH));/* upper touches lower */

  --shaftH: calc(var(--upperPlinthTop) - var(--shaftTop));    /* shaft touches upper plinth */

  /* ===== paint ===== */
  background-image:
    /* parchment wash */
    linear-gradient(180deg, rgba(255,255,255,.45), rgba(0,0,0,.04)),

    /* cornice (2 layers) — grain/striations HORIZONTAL */
    linear-gradient(180deg, rgba(255,255,255,.85), rgba(0,0,0,.12)),
    repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 3px, rgba(255,255,255,.18) 3px 14px),

    /* steps (2 layers) */
    linear-gradient(180deg, rgba(0,0,0,.14), rgba(255,255,255,.35)),
    repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 2px, rgba(255,255,255,.16) 2px 14px),

    /* LEFT lower plinth (3 pieces) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    /* RIGHT lower plinth (3 pieces) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    /* 4 shafts (each = body + fluting overlay) */
    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    /* 4 caps (3-piece rounded illusion) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    /* 4 upper plinths (3-piece rounded illusion) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18));

  /* ===== sizes ===== */
  background-size:
    100% 100%,

    100% var(--corniceH),
    100% var(--corniceH),

    100% var(--stepH),
    100% var(--stepH),

    /* left lower plinth: 3 pieces */
    var(--roundBig) var(--lowerPlinthH),
    var(--roundBig) var(--lowerPlinthH),
    calc(var(--lowerPlinthW) - (var(--roundBig) * 2)) var(--lowerPlinthH),

    /* right lower plinth: 3 pieces */
    var(--roundBig) var(--lowerPlinthH),
    var(--roundBig) var(--lowerPlinthH),
    calc(var(--lowerPlinthW) - (var(--roundBig) * 2)) var(--lowerPlinthH),

    /* shafts: 4*(body+fluting) */
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),

    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),

    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),

    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),

    /* caps: 4 * 3 pieces */
    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    /* upper plinths: 4 * 3 pieces */
    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH),

    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH),

    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH),

    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH);

  /* ===== positions ===== */
  background-position:
    0 0,

    /* cornice */
    0 var(--corniceTop),
    0 var(--corniceTop),

    /* steps band at bottom */
    0 100%,
    0 100%,

    /* left lower plinth (under LEFT PAIR) */
    var(--leftLowerPlinthX) var(--lowerPlinthTop),
    calc(var(--leftLowerPlinthX) + var(--lowerPlinthW) - var(--roundBig)) var(--lowerPlinthTop),
    calc(var(--leftLowerPlinthX) + var(--roundBig)) var(--lowerPlinthTop),

    /* right lower plinth (under RIGHT PAIR) */
    var(--rightLowerPlinthX) var(--lowerPlinthTop),
    calc(var(--rightLowerPlinthX) + var(--lowerPlinthW) - var(--roundBig)) var(--lowerPlinthTop),
    calc(var(--rightLowerPlinthX) + var(--roundBig)) var(--lowerPlinthTop),

    /* shafts (start BELOW caps; end on upper plinth) */
    var(--leftOuterX) var(--shaftTop),
    var(--leftOuterX) var(--shaftTop),

    var(--leftInnerX) var(--shaftTop),
    var(--leftInnerX) var(--shaftTop),

    var(--rightInnerX) var(--shaftTop),
    var(--rightInnerX) var(--shaftTop),

    var(--rightOuterX) var(--shaftTop),
    var(--rightOuterX) var(--shaftTop),

    /* caps (sit directly under cornice) */
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capTop),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capTop),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capTop),

    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capTop),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capTop),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capTop),

    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capTop),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capTop),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capTop),

    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capTop),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capTop),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capTop),

    /* upper plinths (touch lower plinth) */
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthTop),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthTop),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthTop),

    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthTop),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthTop),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthTop),

    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthTop),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthTop),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthTop),

    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthTop),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthTop),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthTop);

  background-repeat: no-repeat;

  /* stabilize compositing on Windows/Chrome */
  transform: translateZ(0);
  will-change: transform;
}

/* keep content above the architecture layer */
body.publications-directory main{
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  /* keep content out of the cornice/steps bands */
  padding-top: calc(var(--corniceH) + 24px);
  padding-bottom: calc(var(--stepH) + 24px);

  position: relative;
  z-index: 1;
}
/* Publications — constrain text to the inner-column bay */
body.publications-directory{
  /* exact clear span between the INNER columns */
  --centerSpan: calc(100vw - (2 * var(--pairEdgeInset)) - (4 * var(--colW)) - (2 * var(--colGap)));
  --centerGutter: 56px; /* breathing room so text never kisses columns */
  --textLane: min(72ch, calc(var(--centerSpan) - var(--centerGutter)));
}

body.publications-directory .portal{
  width: 100%;
  display: flex;
  justify-content: center;
}

body.publications-directory .portal-inner{
  width: min(100%, var(--textLane));
  text-align: center;
}

body.publications-directory .portal-inner p{
  margin-left: auto;
  margin-right: auto;
  text-wrap: pretty;
  overflow-wrap: anywhere;
}

body.publications-directory .portal-inner h1,
body.publications-directory .portal-inner h2{
  text-wrap: balance;
}
