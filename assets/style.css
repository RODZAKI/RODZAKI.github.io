/* =========================
   Rodzaki — style.css
   
   (Publications background rebuilt from scratch for stability)
   ========================= */

/* reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; }

/* ====== theme tokens ====== */
:root{
  --ink: #2a2a2a;
  --muted: #6b6b6b;

  --paper: #f2efe6;

  /* geometry */
  --corniceH: 96px;
  --stepH: 160px;

  --colW: 86px;
  --colGap: 26px;

  --capH: 28px;
  --upperPlinthW: 120px;
  --upperPlinthH: 22px;

  --lowerPlinthW: 260px;
  --lowerPlinthH: 34px;

  --roundBig: 22px;
  --roundMed: 16px;

  /* placement */
  --pairInset: 120px;

  /* stabilize: avoid fractional multiplies */
  --plinthEdge: 65px; /* 260 * .25 */
}

/* ====== base typography ====== */
body{
  font: 16px/1.6 system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  color: var(--ink);
  background: var(--paper);
}

h1{
  margin: 0 0 12px;
  font-size: 30px;
  letter-spacing: .4px;
}

p{ margin: 10px 0; color: var(--muted); }
a{ color: #0b4f6c; text-decoration: none; }
a:hover{ text-decoration: underline; }

/* layout */
main{
  max-width: 980px;
  margin: 0 auto;
  padding: 32px 20px;
}

header{ text-align: center; }

/* =========================
   PUBLICATIONS — PORTAL
   Rebuilt engine (stable)
   ========================= */

body.publications-directory{
  background: var(--paper);
}

/* All heavy painting lives here (one composited layer) */
body.publications-directory::before{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  /* derived anchors */
  --shaftH: calc(100vh - var(--corniceH) - var(--stepH) - var(--upperPlinthH));

  --leftOuterX: calc(var(--plinthEdge) + var(--pairInset));
  --leftInnerX: calc(var(--leftOuterX) + var(--colW) + var(--colGap));

  --rightOuterX: calc(100vw - var(--plinthEdge) - var(--pairInset) - var(--colW));
  --rightInnerX: calc(var(--rightOuterX) - var(--colW) - var(--colGap));

  --capY: calc(var(--corniceH) - var(--capH));
  --upperPlinthY: calc(100% - var(--stepH) - var(--upperPlinthH));
  --lowerPlinthY: calc(100% - var(--stepH));

  /* “stone” paint */
  background-image:
    /* parchment wash */
    linear-gradient(180deg, rgba(255,255,255,.45), rgba(0,0,0,.04)),

    /* cornice (2 layers) */
    linear-gradient(180deg, rgba(255,255,255,.85), rgba(0,0,0,.12)),
    repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 10px, rgba(255,255,255,.18) 10px 20px),

    /* steps (2 layers) */
    linear-gradient(180deg, rgba(0,0,0,.14), rgba(255,255,255,.35)),
    repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 2px, rgba(255,255,255,.16) 2px 14px),

    /* LEFT lower plinth (3 pieces) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    /* RIGHT lower plinth (3 pieces) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    /* 4 shafts (each shaft = body + fluting overlay) */
    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    linear-gradient(180deg, rgba(255,255,255,.70), rgba(0,0,0,.10)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 7px, rgba(255,255,255,.18) 7px 14px),

    /* 4 caps (simple: rounded illusion using three-piece like your v24) */
    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.65), rgba(0,0,0,.12)),
    linear-gradient(180deg, rgba(255,255,255,.65), rgba(0,0,0,.12)),

    /* 4 upper plinths */
    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18)),

    radial-gradient(circle at left 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    radial-gradient(circle at right 50%, rgba(255,255,255,.55), rgba(0,0,0,.18)),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(0,0,0,.18));

  /* sizes */
  background-size:
    100% 100%,

    100% var(--corniceH),
    100% var(--corniceH),

    100% var(--stepH),
    100% var(--stepH),

    var(--roundBig) var(--lowerPlinthH),
    var(--roundBig) var(--lowerPlinthH),
    calc(var(--lowerPlinthW) - (var(--roundBig) * 2)) var(--lowerPlinthH),

    var(--roundBig) var(--lowerPlinthH),
    var(--roundBig) var(--lowerPlinthH),
    calc(var(--lowerPlinthW) - (var(--roundBig) * 2)) var(--lowerPlinthH),

    /* shafts: 8 layers = 4*(body+fluting) */
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),
    var(--colW) var(--shaftH),

    /* caps: 4 * 3 pieces */
    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    var(--roundMed) var(--capH),
    var(--roundMed) var(--capH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--capH),

    /* upper plinths: 4 * 3 pieces */
    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH),

    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH),

    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH),

    var(--roundMed) var(--upperPlinthH),
    var(--roundMed) var(--upperPlinthH),
    calc(var(--upperPlinthW) - (var(--roundMed) * 2)) var(--upperPlinthH);

  /* positions */
  background-position:
    0 0,

    0 0,
    0 0,

    0 100%,
    0 100%,

    /* left lower plinth */
    var(--plinthEdge) var(--lowerPlinthY),
    calc(var(--plinthEdge) + var(--lowerPlinthW) - var(--roundBig)) var(--lowerPlinthY),
    calc(var(--plinthEdge) + var(--roundBig)) var(--lowerPlinthY),

    /* right lower plinth */
    calc(100% - var(--plinthEdge) - var(--lowerPlinthW)) var(--lowerPlinthY),
    calc(100% - var(--plinthEdge) - var(--roundBig)) var(--lowerPlinthY),
    calc(100% - var(--plinthEdge) - var(--lowerPlinthW) + var(--roundBig)) var(--lowerPlinthY),

    /* shafts: left outer */
    var(--leftOuterX) var(--corniceH),
    var(--leftOuterX) var(--corniceH),

    /* shafts: left inner */
    var(--leftInnerX) var(--corniceH),
    var(--leftInnerX) var(--corniceH),

    /* shafts: right inner */
    var(--rightInnerX) var(--corniceH),
    var(--rightInnerX) var(--corniceH),

    /* shafts: right outer */
    var(--rightOuterX) var(--corniceH),
    var(--rightOuterX) var(--corniceH),

    /* caps: each cap uses 3 pieces, centered over shaft */
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capY),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capY),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capY),

    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capY),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capY),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capY),

    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capY),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capY),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capY),

    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--capY),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--capY),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--capY),

    /* upper plinths (same 3-piece pattern) */
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthY),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthY),
    calc(var(--leftOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthY),

    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthY),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthY),
    calc(var(--leftInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthY),

    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthY),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthY),
    calc(var(--rightInnerX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthY),

    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2)) var(--upperPlinthY),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--upperPlinthW) - var(--roundMed)) var(--upperPlinthY),
    calc(var(--rightOuterX) - ((var(--upperPlinthW) - var(--colW)) / 2) + var(--roundMed)) var(--upperPlinthY);

  background-repeat: no-repeat;

  /* stabilize compositing on Windows/Chrome */
  transform: translateZ(0);
  will-change: transform;
}

/* keep content above the architecture layer */
body.publications-directory main{
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding-top: calc(var(--corniceH) + 24px);
  padding-bottom: calc(var(--stepH) + 24px);
  position: relative;
  z-index: 1;
}
